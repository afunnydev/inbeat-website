<section class="container mobile-adjusted">
    <div class="row" id="cpm_calculator-section">
        <div v-for="(campaign,i) in campaigns" :key="i" class="col-xs-12" style="padding: 0;">
            <input-row :campaign="campaign" @delete-row="deleteRow($event)" :refresh="isRefresh"></input-row>
        </div>
        <button @click="addCampaign" class="add-campaign_button col-sm-12">&#43; Add another campaign</button>
        <div class="refresh-button_wrapper" @click="refresh">
            {{- partial "icons/refresh.html" -}}
        </div>
    </div>
</section>

{{- if getenv "IS_PROD" -}}
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
{{- else -}}
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
{{- end -}}
<script src="https://unpkg.com/vue-trend-chart@0.15.1/dist/vue-trend-chart.js"></script>
<script src="./inputs.vue.js"></script>
<script>
    Vue.component('input-row', {
        data: function () {
            return {
                cpmValue : null,
                impressionsValue: null,
                totalCostValue: null,
                lastUpdatedField: '',
                listItems: [{title:'Default',icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 12.7163C16 14.5355 14.5264 16 12.7163 16H3.28368C1.46447 16 0 14.5264 0 12.7163V3.28368C0 1.47356 1.47356 0 3.28368 0H12.7163C14.5355 0 16 1.47356 16 3.28368V12.7163Z" fill="white"/>
                <circle cx="8" cy="8" r="4" fill="black"/>
                </svg>
                 `},{
                    title:'Facebook',
                    icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.51813 0H12.4725C14.4094 0 16 1.59064 16 3.51813V12.4725C16 14.4187 14.4094 16 12.4819 16H3.51813C1.57193 16 0 14.4094 0 12.4725V3.51813C0 1.59064 1.58129 0 3.51813 0Z" fill="#1877F2"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.76686 6.19396V5.41735C8.76686 5.04309 9.0195 4.95887 9.19727 4.95887C9.36569 4.95887 10.2733 4.95887 10.2733 4.95887V3.30273H8.78558C7.12944 3.30273 6.76452 4.52847 6.76452 5.31443V6.18461H5.80078V7.34484V8.11209H6.76452C6.76452 10.2922 6.76452 12.9214 6.76452 12.9214H8.69201C8.69201 12.9214 8.69201 10.2641 8.69201 8.11209H10.1142L10.1797 7.3542L10.292 6.18461H8.76686V6.19396Z" fill="#FEFEFE"/>
                        </svg>`
                    },{
                    title:'Google',
                    icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.5 12.7163C15.5 14.2503 14.2503 15.5 12.7163 15.5H3.28368C1.74151 15.5 0.5 14.2512 0.5 12.7163V3.28368C0.5 1.74971 1.74971 0.5 3.28368 0.5H12.7163C14.2585 0.5 15.5 1.7488 15.5 3.28368V12.7163Z" fill="white" stroke="#EAEAEA"/>
<path d="M11.9222 7.2166H11.6V7.2H8V8.8H10.2606C9.9308 9.7314 9.0446 10.4 8 10.4C6.6746 10.4 5.6 9.3254 5.6 8C5.6 6.6746 6.6746 5.6 8 5.6C8.6118 5.6 9.1684 5.8308 9.5922 6.2078L10.7236 5.0764C10.0092 4.4106 9.0536 4 8 4C5.791 4 4 5.791 4 8C4 10.209 5.791 12 8 12C10.209 12 12 10.209 12 8C12 7.7318 11.9724 7.47 11.9222 7.2166Z" fill="#FBBC05"/>
<path d="M4.46289 6.1382L5.77709 7.102C6.13269 6.2216 6.99389 5.6 8.00169 5.6C8.61349 5.6 9.17009 5.8308 9.59389 6.2078L10.7253 5.0764C10.0109 4.4106 9.05529 4 8.00169 4C6.46529 4 5.13289 4.8674 4.46289 6.1382Z" fill="#EA4335"/>
<path d="M7.9985 11.9997C9.0317 11.9997 9.9705 11.6043 10.6803 10.9613L9.4423 9.91375C9.0407 10.2179 8.5415 10.3997 7.9985 10.3997C6.9581 10.3997 6.0747 9.73635 5.7419 8.81055L4.4375 9.81555C5.0995 11.1109 6.4439 11.9997 7.9985 11.9997Z" fill="#34A853"/>
<path d="M11.9222 7.21582H11.6V7.19922H8V8.79922H10.2606C10.1022 9.24662 9.8144 9.63242 9.4432 9.91342C9.4434 9.91322 9.4436 9.91322 9.4438 9.91302L10.6818 10.9606C10.5942 11.0402 12 9.99922 12 7.99922C12 7.73102 11.9724 7.46922 11.9222 7.21582Z" fill="#4285F4"/>
</svg>`
                    },{
                    title:'TikTok',
                    icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12.0655 16H3.93445C1.76165 16 0 14.2384 0 12.0651V3.93432C0 1.76159 1.76165 0 3.93445 0H12.0655C14.2383 0 16 1.76159 16 3.93432V12.0651C16.0005 14.2384 14.2389 16 12.0655 16Z" fill="black"/>
                          <path d="M6.64962 6.81031V6.32663C6.48176 6.30008 6.31222 6.28557 6.14229 6.28321C4.49716 6.27991 3.04112 7.34566 2.54698 8.91433C2.05284 10.483 2.63602 12.1913 3.98598 13.1306C2.56952 11.6147 2.65031 9.23752 4.16627 7.8211C4.84177 7.19055 5.72577 6.83073 6.64962 6.81031Z" fill="#25F4EE"/>
                          <path d="M6.7403 12.2862C7.65988 12.2851 8.41566 11.5607 8.45634 10.6417V2.44269H9.95416C9.92352 2.27147 9.90898 2.09776 9.91073 1.92383H7.86216V10.1146C7.82808 11.0379 7.0701 11.7695 6.14612 11.7712C5.87019 11.769 5.59811 11.7008 5.35352 11.5733C5.51212 11.793 5.72043 11.9721 5.96143 12.096C6.20244 12.2199 6.46932 12.2851 6.7403 12.2862ZM12.7514 5.22441V4.76876C12.2001 4.76876 11.6608 4.60607 11.2019 4.30102C11.6042 4.76913 12.1482 5.09331 12.7514 5.22441Z" fill="#25F4EE"/>
                          <path d="M11.2035 4.30218C10.751 3.78717 10.5017 3.12497 10.5021 2.43945H9.95518C10.0256 2.81852 10.1726 3.17922 10.3873 3.49951C10.6019 3.8198 10.8796 4.09292 11.2035 4.30218ZM6.14275 8.33214C5.19294 8.33708 4.42672 9.11098 4.43166 10.0608C4.43323 10.3725 4.51952 10.678 4.6813 10.9445C4.84309 11.2111 5.07427 11.4286 5.35014 11.5739C4.79444 10.8066 4.96593 9.73372 5.73325 9.17748C6.02644 8.96514 6.37932 8.85104 6.74133 8.85155C6.91337 8.85374 7.08431 8.88068 7.24866 8.93124V6.84646C7.08102 6.82118 6.91117 6.80799 6.74133 6.80689H6.65008V8.39205C6.48464 8.34698 6.31369 8.32719 6.14275 8.33214Z" fill="#FE2C55"/>
                          <path d="M12.7498 5.22461V6.80977C11.7293 6.80781 10.7353 6.48475 9.90859 5.88637V10.051C9.90419 12.1292 8.21839 13.8116 6.14014 13.8116C5.36831 13.8131 4.61507 13.575 3.98438 13.1301C5.39865 14.6509 7.77812 14.7378 9.29957 13.3235C9.67805 12.9717 9.97995 12.5457 10.1864 12.072C10.3928 11.5983 10.4994 11.0871 10.4995 10.5704V6.41733C11.329 7.01149 12.3241 7.33024 13.3445 7.32863V5.28837C13.1444 5.28727 12.9455 5.26638 12.7498 5.22461Z" fill="#FE2C55"/>
                          <path d="M9.90985 10.052V5.88734C10.7391 6.48198 11.7344 6.80078 12.7549 6.79865V5.21348C12.152 5.08604 11.6069 4.76623 11.2015 4.30218C10.8779 4.09275 10.6003 3.81958 10.3856 3.49932C10.171 3.17906 10.0239 2.81844 9.95327 2.43945H8.45545V10.6423C8.41643 11.5915 7.61612 12.3291 6.66686 12.2906C6.40717 12.2801 6.15324 12.2108 5.92418 12.088C5.69512 11.9652 5.49689 11.7921 5.34439 11.5816C4.50396 11.1392 4.18131 10.0992 4.62378 9.25883C4.76899 8.9829 4.98652 8.75166 5.25308 8.58987C5.51963 8.42808 5.82518 8.34184 6.13699 8.34039C6.30904 8.34203 6.47998 8.36842 6.64433 8.41953V6.81074C4.56992 6.84591 2.91654 8.58003 2.95172 10.6544C2.96764 11.5938 3.33495 12.4931 3.98123 13.175C4.61812 13.6052 5.3724 13.8281 6.14084 13.8131C8.21965 13.8126 9.90545 12.1302 9.90985 10.052Z" fill="white"/>
                          </svg>`
                    },{
                    title:'Pinterest',
                    icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M16 12.7163C16 14.5355 14.5264 16 12.7163 16H3.28368C1.46447 16 0 14.5264 0 12.7163V3.28368C0 1.47356 1.47356 0 3.28368 0H12.7163C14.5355 0 16 1.47356 16 3.28368V12.7163Z" fill="#BC081C"/>
                          </svg>`
                    },{
                    title:'Snapchat',
                    icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M16 12.7163C16 14.5355 14.5264 16 12.7163 16H3.28368C1.46447 16 0 14.5264 0 12.7163V3.28368C0 1.47356 1.47356 0 3.28368 0H12.7163C14.5355 0 16 1.47356 16 3.28368V12.7163Z" fill="#FFFC01"/>
                          <path d="M11.0847 8.41442C11.0846 8.41743 11.0847 8.42158 11.0852 8.42724C11.0871 8.44688 11.0954 8.48757 11.1271 8.55352L11.1359 8.57188L11.1432 8.59088C11.1432 8.59073 11.1433 8.591 11.1436 8.59167C11.1475 8.60089 11.1844 8.68691 11.2587 8.81684C11.337 8.9535 11.4517 9.12982 11.6047 9.3089C11.913 9.66994 12.351 10.0136 12.9376 10.1096L13.3569 10.1781V10.603C13.3569 10.6035 13.3569 10.6043 13.3569 10.6053C13.3572 10.6283 13.3594 10.7713 13.2609 10.9108C13.1013 11.1543 12.7478 11.3577 11.9226 11.506C11.9191 11.5191 11.9155 11.5332 11.9115 11.5489C11.9095 11.5567 11.9074 11.5649 11.9051 11.5735C11.8901 11.6413 11.8713 11.7254 11.8432 11.8195L11.841 11.8268L11.8386 11.834L11.833 11.8503C11.8305 11.8576 11.8248 11.8735 11.8164 11.8924C11.8013 11.9264 11.7569 12.0197 11.6548 12.0964C11.5495 12.1756 11.4438 12.1917 11.4 12.1964C11.3774 12.1989 11.359 12.1993 11.3508 12.1995C11.3463 12.1996 11.3419 12.1996 11.3385 12.1997C11.3357 12.1997 11.3336 12.1997 11.3329 12.1997L11.0847 8.41442ZM11.0847 8.41442C11.0928 8.40485 11.1153 8.3823 11.1706 8.35169C11.2509 8.30722 11.3495 8.27322 11.4607 8.23855M11.0847 8.41442L11.4607 8.23855M11.4607 8.23855C11.5105 8.22418 11.581 8.20252 11.6476 8.17222C11.7612 8.12759 11.9104 8.06029 12.0492 7.94831C12.1311 7.88464 12.2257 7.78312 12.2824 7.64614C12.3488 7.48571 12.3761 7.2127 12.1648 6.99262C12.0436 6.86291 11.8885 6.79845 11.7832 6.7676C11.6757 6.73612 11.5113 6.70782 11.3442 6.7497C11.2617 6.77038 11.1887 6.79963 11.1461 6.81672L11.1439 6.81761C11.0907 6.83893 11.0775 6.84386 11.0682 6.84639L11.0604 6.84853L11.0527 6.85091C11.0447 6.85337 11.0371 6.85565 11.0298 6.85778C11.0299 6.85498 11.0301 6.85217 11.0303 6.84937C11.0489 6.53345 11.0709 6.16087 11.064 5.80903C11.0569 5.44943 11.02 5.0418 10.8762 4.71482L10.8763 4.71481L10.8744 4.71066C10.7473 4.42851 10.5812 4.15861 10.3655 3.91375C10.1806 3.69968 9.96839 3.52649 9.73356 3.38488C9.54323 3.26708 9.3276 3.16221 9.09448 3.09258C8.90169 3.02616 8.71608 2.99012 8.54867 2.96489C8.40534 2.94238 8.25129 2.93642 8.1369 2.932C8.1058 2.9308 8.07764 2.92971 8.05341 2.92843L8.04025 2.92773H8.02707C7.86138 2.92773 7.69579 2.93646 7.53038 2.95386C7.33479 2.97361 7.15406 3.02131 7.01346 3.05843C7.0092 3.05955 7.00498 3.06067 7.00081 3.06177L6.99157 3.0642L6.98244 3.06699C6.76589 3.13305 6.5518 3.2265 6.35621 3.33852L6.3562 3.33851L6.35234 3.34076C6.13614 3.46717 5.91374 3.62902 5.72263 3.83932C5.51009 4.06263 5.33435 4.31373 5.19602 4.59103L5.18675 4.60961L5.17957 4.62761C5.17938 4.62796 5.17703 4.63301 5.16867 4.64978C5.16816 4.6508 5.16761 4.6519 5.16701 4.6531C5.1589 4.6693 5.14285 4.7014 5.12801 4.73737C4.98684 5.06291 4.95029 5.46513 4.94327 5.82173C4.93642 6.16984 4.958 6.53942 4.97653 6.85662C4.97707 6.86598 4.97762 6.87529 4.97816 6.88455C4.93638 6.87514 4.88802 6.86102 4.83329 6.84166L4.83332 6.84159L4.82504 6.83882C4.82499 6.8388 4.82377 6.83838 4.82096 6.8373L4.80627 6.83135C4.8046 6.83066 4.8024 6.82974 4.79976 6.82864C4.78708 6.82334 4.76444 6.81388 4.74387 6.806C4.69541 6.78743 4.6057 6.75585 4.49274 6.751C4.28048 6.73473 4.11346 6.81253 4.00591 6.87936C3.85933 6.96888 3.65641 7.16128 3.67921 7.46971C3.6975 7.71721 3.85892 7.87324 3.92597 7.93224C4.06987 8.05884 4.25569 8.14377 4.35662 8.1822C4.42288 8.21185 4.49233 8.23304 4.54114 8.24707C4.65354 8.28094 4.75206 8.31508 4.83038 8.35875C4.88496 8.38919 4.9068 8.41169 4.91452 8.42138C4.91481 8.42485 4.91495 8.43044 4.91418 8.43852C4.91219 8.45938 4.90387 8.49798 4.8756 8.55466L4.86484 8.57623L4.85621 8.59872C4.85639 8.59826 4.85616 8.59876 4.85553 8.6002C4.85001 8.61275 4.81334 8.69614 4.74076 8.82158C4.66194 8.95782 4.54638 9.13381 4.39268 9.31283C4.0826 9.674 3.6434 10.0187 3.05892 10.1179L2.64258 10.1885V10.6108C2.64258 10.6114 2.64257 10.6121 2.64255 10.6131C2.64224 10.634 2.64046 10.7537 2.71369 10.88C2.80569 11.0546 2.97663 11.1757 3.16794 11.2638C3.36741 11.3556 3.6529 11.4414 4.06815 11.5136C4.06997 11.5229 4.07188 11.5327 4.0739 11.5432L4.07525 11.5502L4.0768 11.5572C4.07881 11.5663 4.08103 11.5766 4.08347 11.5878C4.09634 11.6473 4.11525 11.7347 4.14065 11.8195L4.14281 11.8268L4.1452 11.834C4.13958 11.817 4.15231 11.8575 4.16433 11.8859C4.18204 11.9277 4.22305 12.0111 4.31085 12.0844C4.39862 12.1577 4.4899 12.1852 4.54762 12.1966C4.60052 12.2069 4.64564 12.2075 4.66654 12.2075C4.7386 12.2075 4.80369 12.1961 4.84095 12.1891C4.8621 12.1851 4.89517 12.1782 4.92114 12.1729C4.93412 12.1702 4.94532 12.1678 4.95238 12.1664L4.9524 12.1665L4.96281 12.1642C5.07559 12.1391 5.23393 12.1135 5.43243 12.1135C5.55624 12.1135 5.65589 12.1207 5.74575 12.1407L5.75579 12.1429L5.76592 12.1448C5.94331 12.1767 6.10793 12.2789 6.3727 12.4719L6.38095 12.4779L6.38944 12.4836C6.41819 12.5028 6.44608 12.5225 6.48004 12.5465L6.48203 12.5479C6.51407 12.5706 6.55189 12.5973 6.59263 12.6246L6.87043 12.2088L11.4607 8.23855ZM9.61318 12.476C9.89499 12.2766 10.0474 12.1776 10.223 12.1453L7.40186 12.483C7.62068 12.5535 7.84732 12.577 8.07397 12.5692V13.0692C8.07631 13.0692 8.07882 13.0692 8.08148 13.0692C8.08163 13.0692 8.08178 13.0692 8.08194 13.0692C8.12262 13.0692 8.19882 13.0693 8.28164 13.0569C8.54743 13.0259 8.81129 12.9469 9.04825 12.8282C9.22223 12.741 9.39179 12.626 9.52681 12.5344C9.55335 12.5164 9.57855 12.4994 9.60219 12.4836L9.60229 12.4837L9.61318 12.476ZM3.52862 10.3242C3.52873 10.3242 3.53034 10.3252 3.53311 10.3275C3.5299 10.3253 3.52851 10.3242 3.52862 10.3242Z" fill="white" stroke="black"/>
                          </svg>`
                    },{
                    title:'Twitter',
                    icon:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M16 12.7163C16 14.5264 14.5264 16 12.7163 16H3.28368C1.46447 16 0 14.5264 0 12.7163V3.28368C0 1.47356 1.47356 0 3.28368 0H12.7072C14.5264 0 15.9909 1.47356 15.9909 3.28368V12.7163H16Z" fill="#1DA1F2"/>
                          <path d="M6.09379 12.6353C10.2962 12.6353 12.5975 9.15145 12.5975 6.13156C12.5975 6.0315 12.5975 5.93144 12.5884 5.84048C13.0341 5.52212 13.4252 5.1128 13.7254 4.65799C13.3161 4.83991 12.8704 4.95816 12.4156 5.02183C12.8886 4.73986 13.2524 4.29415 13.4252 3.75748C12.9795 4.02127 12.4974 4.21228 11.9699 4.31234C11.5514 3.86663 10.9602 3.59375 10.3053 3.59375C9.04092 3.59375 8.02216 4.62161 8.02216 5.87687C8.02216 6.05879 8.04035 6.23161 8.07673 6.39534C6.17565 6.29529 4.49288 5.38568 3.36496 4.00307C3.16485 4.33963 3.0557 4.73076 3.0557 5.14918C3.0557 5.94054 3.45592 6.64094 4.07446 7.05026C3.70152 7.04116 3.34677 6.93201 3.0375 6.76828C3.0375 6.77738 3.0375 6.78647 3.0375 6.79557C3.0375 7.90529 3.82886 8.824 4.87491 9.03321C4.68389 9.08778 4.48378 9.11507 4.27457 9.11507C4.12903 9.11507 3.9835 9.09688 3.84706 9.06959C4.13813 9.9792 4.98407 10.6432 5.98463 10.6614C5.19328 11.2799 4.2109 11.6438 3.13756 11.6438C2.95564 11.6438 2.77372 11.6347 2.5918 11.6074C3.60146 12.2623 4.80214 12.6353 6.09379 12.6353Z" fill="white"/>
                          </svg>
                          `
                    }
                ]
            }
        },
        props:{
            campaign:{
                type: String
            },
            refresh:{
                type: Boolean
            }
        },
        methods:{
        copyValue(value){
            if(value){
                navigator.clipboard.writeText(value)
            }
        },
        calculateCPM(e, fieldName){
            let newValue = e.target.value.replace(/\D/g, "").replace(/,/g, '')
            this[`${fieldName}Value`] = parseFloat(newValue);
            if(!this.cpmValue && !this.impressionsValue || !this.impressionsValue && !this.totalCostValue || !this.cpmValue && !this.totalCostValue){
                return // do not calculate anything
            }
            if(this.lastUpdatedField){
                // update lastUpdatedField
                this.calculateOtherField(this.lastUpdatedField)
            } else {
                //
                if(fieldName === 'cpm') {
                    // Not allowed
                    if(!this.impressionsValue){
                        this.calculateOtherField('impressions')
                    }
                    else if(!this.totalCostValue){
                        this.calculateOtherField('totalCost')
                    } else {
                        this.calculateOtherField('totalCost')
                    }
                } else {
                    if(this.totalCostValue && this.impressionsValue){
                        // update CPM
                        this.calculateOtherField('cpm')
                    }
                    else if(this.totalCostValue && this.cpmValue && fieldName !== 'impressions'){ 
                        // update impressions
                        this.calculateOtherField('impressions')
                    }
                    else if(this.impressionsValue && this.cpmValue && fieldName !== 'totalCost'){
                        // update totalCost
                        this.calculateOtherField('totalCost')
                    }
                }
            }
        },
        setInputSize(e, fieldName){
            if(e.value){
                if(e.value && this[`${fieldName}Text`]){
                        if(e.value.length > 1){
                            if(this[`${fieldName}Text`].length >= 3){
                                e.size = this[`${fieldName}Text`].length - 2   
                            }else{
                                e.size = this[`${fieldName}Text`].length
                            }
                        } else{
                            e.size = fieldName === 'totalCost' ? 3 :  fieldName === 'cpm' ? 1 : fieldName === 'impressions' ? 4 : 1
                        }
                    }
                    else{
                        e.size = fieldName === 'totalCost' ? 3 :  fieldName === 'cpm' ? 1 : fieldName === 'impressions' ? 4 : 1
                }
            }
        },
        calculateOtherField(fieldName) {
            switch(fieldName){
                case 'cpm': 
                this.cpmValue = ((this.totalCostValue / (this.impressionsValue/1000))).toFixed(0);
                break;
                case 'impressions':
                    this.impressionsValue = ((this.totalCostValue / this.cpmValue) * 1000).toFixed(0);
                    break;
                    case 'totalCost':
                        this.totalCostValue = ((this.impressionsValue / 1000) * this.cpmValue).toFixed(0);
                        break;
                    }
                    this.lastUpdatedField = fieldName;
        },  
        blur(e){
            e.target.parentElement.parentElement.classList.remove('--active_input-box')
            this.lastUpdatedField = '';
        },
        focus(e){
            e.target.parentElement.parentElement.classList.add('--active_input-box')
        },
        deleteRow(){
            this.$emit('delete-row',this.campaign)
        }
      },
      watch: {
        cpmValue(){
            this.setInputSize(this.$refs.cpm,'cpm')
        },
        impressionsText(){
            this.setInputSize(this.$refs.impressions,'impressions')
        },
        totalCostText(){
            this.setInputSize(this.$refs.totalCost,'totalCost')
        },
        refresh(){
            this.cpmValue = null
            this.impressionsValue = null
            this.totalCostValue = null
            this.lastUpdatedField = ''
        }
      },
      computed: {
        cpmText() {
            return this.cpmValue && this.cpmValue !== 'NaN' ? this.cpmValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") : this.cpmValue = null;
        },
        impressionsText() {
            return this.impressionsValue && this.impressionsValue !== 'NaN'  ? this.impressionsValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") : this.impressionsValue = null;
        },
        totalCostText() {
            return this.totalCostValue && this.totalCostValue !== 'NaN' ? this.totalCostValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","): this.totalCostValue = null;
        },
      },

        template:  `
        <div>
    <div class="toolbox">
        <div class="dropdown-wrapper">
            <div class="dropdown">
                <a href="javascript:void(0)">
                    snapchat
                </a>
            </div>
            <svg class="dropdown-icon" width="13" height="7" viewBox="0 0 13 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 0.5L6.5 5.5L12 0.5" stroke="black" stroke-opacity="0.25"/>
            </svg>
            <ul class="dropdown-list">
                <li v-for="(item,i) in listItems" class="list-item">
                    <!-- <img src="./../../../static/icons/facebook.svg" alt=""> -->
                    <span style="display:flex; align-items: center; justify-content: center;">
                        <span style="margin-right: 6px;padding: 0;" v-html="item.icon">
                        </span>
                        <p class="list-title">
                            {item.title}
                        </p>
                    </span>
                </li>    
            </ul>
        </div>
        <p @click="deleteRow">Delete</p>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-4">
            <div class="calculator_input-box ">
                <div class="header --green">
                    Total Cost <span class="question-circle --green_bg">
                        {{- partial "icons/question-mark.html" -}}
                    </span>
                    <span class="--tooltip">The total cost or budget <br> for the campaign</span>
                </div>
                <div class="input-wrapper" :class="{'--border':totalCostValue}">
                    <input @focus="focus" @blur="blur" @input="calculateCPM($event, 'totalCost')" :value="totalCostText" type="text" placeholder="1,000" size="3" ref="totalCost">
                    {{- partial "icons/doller.html" -}}
                </div>
                <div class="copy-button_wrapper hide-sm" @click="copyValue(totalCostValue)">
                    {{- partial "icons/copy-button.html" -}}
                    <span class="--tooltip">Copy to clipboard</span>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-md-4">
            <div class="calculator_input-box">
                <div class="header --yellow">
                    Impressions <span class="question-circle --yellow_bg">
                        {{- partial "icons/question-mark.html" -}}
                    </span>
                    <span class="--tooltip">The total advertising impressions </br> over the life of the campaign</span>
                </div>
                <div class="input-wrapper" :class="{'--border':impressionsValue}">
                    <input @focus="focus" @blur="blur" @input="calculateCPM($event, 'impressions')" :value="impressionsText"  type="text" placeholder="50,000" size="4" ref="impressions">
                    {{- partial "icons/doller.html" -}}
                </div>
                <div class="copy-button_wrapper hide-sm" @click="copyValue(impressionsValue)">
                    {{- partial "icons/copy-button.html" -}}
                    <span class="--tooltip">Copy to clipboard</span>
                </div>
            </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="calculator_input-box">
                    <div class="header --pink" title="CPM">
                        CPM <span class="question-circle --pink_bg">
                            {{- partial "icons/question-mark.html" -}}
                        </span>
                        <span class="--tooltip">The cost of the campaign <br> per 1,000 ad exposures</span>
                    </div>
                    <div class="input-wrapper" :class="{'--border':cpmValue}">
                        <input @focus="focus" @blur="blur" @input="calculateCPM($event, 'cpm')" :value="cpmText" type="text" placeholder="20" size="1" ref="cpm">
                        {{- partial "icons/doller.html" -}}
                    </div>
                    <div class="copy-button_wrapper hide-sm" @click="copyValue(cpmValue)">
                        {{- partial "icons/copy-button.html" -}}
                        <span class="--tooltip">Copy to clipboard</span>
                    </div>
                </div>
                </div>
            </div>
</div>
    `
    })
    var app = new Vue({
      el: '#cpm_calculator-section',
      data: {
            campaigns: ['Campaign 1'],
            ind : 2,
            isRefresh: false
        },
    methods:{
        addCampaign(){
            this.campaigns.push(`Campaign ${this.ind++}`)
        },
        deleteRow(e){
            this.campaigns = this.campaigns.filter(campaign =>{
                campaign != e
            })
        },
        refresh(){
            this.isRefresh = !this.isRefresh
        }
    },
      // To make sure there's no conflict with Hugo templating
      delimiters: ['{', '}'],
    });
    </script>